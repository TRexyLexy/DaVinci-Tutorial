<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Login - DaVinci Portal</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    #error-message {
      color: #fff;
      display: none;
    }
  </style>
</head>
<body>
  <div class="login-box">
    <h2>DaVinci WMS Login</h2>

    <form onsubmit="handleLogin(event)">
      <input type="text" id="email" placeholder="Enter your email or username (e.g. john.smith)" required />

      <input type="password" id="password" placeholder="Enter the password" required />
      <button type="submit">Log In</button>
      <p id="error-message"></p>
    </form>
  </div>

  <script>
  const userAccounts = {
    "alexiya.wright@brwnow.com": {
      username: "alexiya.wright",
      name: "Alexiya Wright"
    },
    "derrick.vanover@brwnow.com": {
      username: "derrick.vanover",
      name: "Derrick Vanover"
    },
    "amy.bumpus@brwnow.com": {
      username: "amy.bumpus",
      name: "Amy Bumpus "
    }, 

   "jason.smart@brwnow.com": {
      username: "jason.smart",
      name: "Jason Smart"
    },

    "guest": {
      username: "guestuser",
      name: "Guest User"
    }
  };

  const universalPassword = "brwilliams2025";

  function handleLogin(event) {
    event.preventDefault();

    const input = document.getElementById("email").value.trim().toLowerCase().replace(/\u200B/g, "");
    const password = document.getElementById("password").value.trim();
    const errorMessage = document.getElementById("error-message");

    let matchedEmail = null;
    let matchedName = null;

    // Match by full email or by username
    for (const email in userAccounts) {
      const { username, name } = userAccounts[email];
      if (input === email || input === username) {
        matchedEmail = email;
        matchedName = name;
        break;
      }
    }

    if (!matchedEmail || password !== universalPassword) {
      errorMessage.textContent = "Access denied. Invalid username or password.";
      errorMessage.style.display = "block";
      return;
    }

    // Success: store session data
    sessionStorage.setItem("authenticated", "true");
    sessionStorage.setItem("userName", matchedName);
    sessionStorage.setItem("userEmail", matchedEmail);
    window.location.href = "index.html";
  }
</script>


</body>
</html>
